import{b as O,O as I,a8 as F,_ as L,C as j,c as P,o as S,d as $,F as G,u as J,x as Q,a as f,I as z,q as b,r as D,N as A,n as U,h as w,a9 as W,V as X,S as Y}from"./index-qeq2zkB_.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};function E(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable}))),s.forEach(function(c){K(a,c,e[c])})}return a}function K(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}var V=function(t,e){var s=E({},t,e.attrs);return O(I,E({},s,{icon:Z}),null)};V.displayName="StopOutlined";V.inheritAttrs=!1;var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};function H(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable}))),s.forEach(function(c){te(a,c,e[c])})}return a}function te(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}var k=function(t,e){var s=H({},t,e.attrs);return O(I,H({},s,{icon:ee}),null)};k.displayName="SyncOutlined";k.inheritAttrs=!1;var M={exports:{}},re=M.exports,q;function ne(){return q||(q=1,function(a,t){(function(e,s){a.exports=s()})(re,function(){return function(e,s,c){e=e||{};var u=s.prototype,C={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function x(l,d,h,r){return u.fromToBase(l,d,h,r)}c.en.relativeTime=C,u.fromToBase=function(l,d,h,r,o){for(var p,i,g,n=h.$locale().relativeTime||C,v=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],R=v.length,y=0;y<R;y+=1){var m=v[y];m.d&&(p=r?c(l).diff(h,m.d,!0):h.diff(l,m.d,!0));var _=(e.rounding||Math.round)(Math.abs(p));if(g=p>0,_<=m.r||!m.r){_<=1&&y>0&&(m=v[y-1]);var N=n[m.l];o&&(_=o(""+_)),i=typeof N=="string"?N.replace("%d",_):N(_,d,m.l,g);break}}if(d)return i;var B=g?n.future:n.past;return typeof B=="function"?B(i):B.replace("%s",i)},u.to=function(l,d){return x(l,d,this,!0)},u.from=function(l,d){return x(l,d,this)};var T=function(l){return l.$u?c.utc():c()};u.toNow=function(l){return this.to(T(this),l)},u.fromNow=function(l){return this.from(T(this),l)}}})}(M)),M.exports}var ae=ne();const ge=F(ae),se={class:"document-flow-container"},ie={class:"step-content"},oe={class:"step-description"},ce={class:"step-status-badge"},le={class:"approver-info"},ue={class:"approver-name"},de={class:"approver-role"},pe={key:0,class:"signed-time"},fe={class:"time-value"},me={key:1,class:"multichoice-info"},he={__name:"ProgressDocument",props:{steps:{type:Object,required:!1,default:()=>null}},setup(a){const t=a,e={document_flow_id:8,document_flow_name:"Luồng phê duyệt cho 'Test thêm nháp' của Hải Nam - 5/27/2025, 9:23:01 AM",total_steps:2,steps:[{id:15,step:1,department:{id:6,name:"Hội Sinh viên"},approver:{id:17,name:"Ngọc Thúy",department:{id:6,name:"Hội Sinh viên"},roll:{id:16,name:"Phó Chủ tịch"},roll_display:"Phó Chủ tịch - Hội Sinh viên"},multichoice:!1,status:"approved",decision:"approve",signed_at:"10:30:15 27/05/2025",created_at:"09:23:02 27/05/2025",updated_at:"10:30:15 27/05/2025"},{id:16,step:2,department:{id:4,name:"Phòng CT & CTSV"},approver:{id:16,name:"Diệp Hoàng Trúc Mai",department:{id:4,name:"Phòng CT & CTSV"},roll:{id:2,name:"Phó phòng"},roll_display:"Phó phòng - Phòng CT & CTSV"},multichoice:!1,status:"pending",decision:"not_yet",signed_at:null,created_at:"09:23:02 27/05/2025",updated_at:"09:23:02 27/05/2025"}]},s=j(()=>(console.log("Props received:",t.steps),t.steps||e)),c=(r,o)=>{switch(r){case"approved":return"approved";case"rejected":return"rejected";case"pending":return"waiting";case"in_review":return"in_review";default:return"waiting"}},u=j(()=>{var p;if(!((p=s.value)!=null&&p.steps))return[];const r=s.value.steps;let o=!1;return r.map((i,g)=>{var v;let n=c(i.status,i.decision);return o&&n!=="rejected"&&(n="disabled"),(i.status==="rejected"||i.decision==="reject")&&(o=!0,n="rejected"),{...i,title:`Bước ${i.step}: ${i.department.name}`,description:`${i.status==="approved"?`Đã phê duyệt bởi: ${i.approver.name}`:`Chờ phê duyệt bởi: ${((v=i.approver)==null?void 0:v.name)??"Bất kỳ ai"}`}`,displayStatus:n,originalStatus:i.status}})}),C=j(()=>{const r=u.value;for(let o=0;o<r.length;o++)if(r[o].displayStatus==="in_review"||r[o].displayStatus==="waiting")return o;return r.length-1});j(()=>u.value.filter(r=>r.displayStatus==="approved").length);const x=r=>{switch(r){case"approved":return w(Y,{style:{color:"#52c41a"}});case"rejected":return w(X,{style:{color:"#ff4d4f"}});case"in_review":return w(k,{style:{color:"#1890ff"},spin:!0});case"waiting":return w(W,{style:{color:"#d9d9d9"}});case"disabled":return w(V,{style:{color:"#bfbfbf",opacity:.5}});default:return}},T=r=>`step-${r}`,l=r=>{switch(r){case"approved":return"finish";case"rejected":return"error";case"in_review":return"process";case"waiting":return"wait";case"disabled":return"wait";default:return"wait"}},d=r=>{switch(r){case"approved":return"success";case"rejected":return"error";case"in_review":return"processing";case"waiting":return"default";case"disabled":return"";default:return"default"}},h=r=>{switch(r){case"approved":return"Đã duyệt";case"rejected":return"Từ chối";case"in_review":return"Đang xem xét";case"waiting":return"Chờ xử lý";case"disabled":return"Bị vô hiệu";default:return"Không xác định"}};return(r,o)=>{const p=D("a-tag"),i=D("a-step"),g=D("a-steps");return S(),P("div",se,[O(g,{direction:"vertical",current:C.value,class:"main-steps"},{default:$(()=>[(S(!0),P(G,null,J(u.value,(n,v)=>(S(),Q(i,{key:n.id,title:n.title,description:n.description,status:l(n.displayStatus),icon:x(n.displayStatus),class:U(T(n.displayStatus))},{description:$(()=>[f("div",ie,[f("div",oe,b(n.description),1),f("div",ce,[O(p,{color:d(n.displayStatus),class:"status-tag"},{default:$(()=>[A(b(h(n.displayStatus)),1)]),_:2},1032,["color"])]),f("div",le,[f("div",ue,[f("strong",null,b(n.approver.name),1)]),f("div",de,b(n.approver.roll_display),1)]),n.signed_at?(S(),P("div",pe,[o[0]||(o[0]=f("span",{class:"time-label"},"Thời gian ký:",-1)),f("span",fe,b(n.signed_at),1)])):z("",!0),n.multichoice?(S(),P("div",me,[O(p,{color:"blue",size:"small"},{default:$(()=>o[1]||(o[1]=[A(" Phê duyệt đồng thuận ")])),_:1})])):z("",!0)])]),_:2},1032,["title","description","status","icon","class"]))),128))]),_:1},8,["current"])])}}},_e=L(he,[["__scopeId","data-v-c28371ba"]]);export{_e as N,ge as r};
