import{_ as P,e as A,c as E,o as z,a as t,b as a,d as o,I as Q,r as n,N as d,J as O,F,a1 as L,g as c,z as q,C,H as S,D as H}from"./index-C78nIXCd.js";import{u as X}from"./use-register-u70WSN7F.js";import{U as J}from"./UploadOutlined-DQCP5nhD.js";import{U as W}from"./UserOutlined-3dlb70Iv.js";const Y=A({components:{UserOutlined:W,UploadOutlined:J,QuestionCircleOutlined:L},setup(){var D,G;const s=c("information"),e=q(),V=X();V.fetchRegisterForm();const r=C(()=>e.user),x=C(()=>e.user_details);console.log("User Details:",x.value),H();const M=c(r.value.name||""),U=c(r.value.email||""),$=c(r.value.phone||""),m=c(r.value.description||""),R=e.role;console.log("Role:",R);const u=c(((D=x.value)==null?void 0:D.department_id)||null),p=c(((G=x.value)==null?void 0:G.roll_at_department_id)||null),I=c(r.value.sex||"Male"),B=C(()=>V.departments),y=C(()=>V.rolls),v=i=>i>100||i==null?"https://avatar.iran.liara.run/public":`https://avatar.iran.liara.run/public/${i}`,_=i=>{if(!i)return v(null);const K="http://localhost:8000";return i.avatar===null?v(i.id):`${K}/images/avatars/${i.avatar}`},T=()=>{console.log("Change avatar clicked")},h=()=>{console.log("Change information clicked")},f=()=>{console.log("Request new department clicked")},w=c("system"),g=c([{value:"en",label:"English"},{value:"vi",label:"Tiếng Việt"}]),j=c("vi"),l=()=>{console.log("Change user interface clicked")},k=c(""),b=c(""),N=c("");return{activeKey:s,user:r,name:M,email:U,phone:$,description:m,selectedDepartment:u,selectedRoll:p,sex:I,departments:B,rolls:y,theme_color:w,languages:g,language:j,current_password:k,new_password:b,new_password_confirmation:N,getAvatarUrl:_,handleClickChangeAvatar:T,changeInformation:h,showRequestNewDepartmentModal:f,changeUserInterface:l,changePassword:async()=>{if(!k.value.trim()||!b.value.trim()||!N.value.trim()){S.error("Vui lòng điền đầy đủ thông tin mật khẩu");return}if(b.value!==N.value){S.error("Mật khẩu mới và xác nhận mật khẩu không khớp");return}try{const i=await e.changePassword(k.value.trim(),b.value.trim(),N.value.trim());S.success("Mật khẩu đã được thay đổi thành công"),k.value="",b.value="",N.value=""}catch(i){console.error("Error changing password:",i)}}}}}),Z={class:"d-flex row mt-3"},ee={class:"row mt-3"},te={class:"col-12 col-md-2 align-items-center d-flex flex-column"},se={class:"row justify-content-center"},le={class:"col-12 col-md-4"},ae={class:"col-12 col-sm-12 mt-1"},oe={class:"col-12 col-md-5 mt-2 mt-md-0"},ne={class:"col-12 col-sm-12 mt-1"},ce={class:"d-flex align-items-center"},ie={class:"col-12 col-md-3 mt-2 mt-md-0"},de={class:"col-12 col-sm-12 mt-1"},re={class:"d-flex"},me={class:"row justify-content-start mt-0 mt-md-3"},ue={class:"col-12 col-md-4 mt-2 mt-md-0"},pe={class:"col-12 col-sm-12 mt-1"},ve={class:"col-12 col-md-4 mt-2 mt-md-0"},_e={class:"col-12 col-sm-12 mt-1"},he={class:"col-12 col-md-4 mt-2 mt-md-0"},fe={class:"col-12 col-sm-12 mt-2"},we={class:"row justify-content-start mt-3"},ge={class:"col-12 col-sm-12 mt-1"},be={class:"row justify-content-end mt-3"},Ne={class:"col-12 col-sm-12 text-end"};const Ve={class:"row mt-3"},xe={class:"row justify-content-center"},Be={class:"col-12"},ye={class:"col-12 mt-1"},ke={class:"row justify-content-start mt-3"},Ce={class:"col-3 mt-1"},Ue={class:"row align-items-center"},$e={class:"row justify-content-end mt-3"},Re={class:"col-12 col-sm-12 text-end"},Ie={class:"row mt-3"},Te={class:"row justify-content-center"},je={class:"col-12 col-md-4"},Oe={class:"col-12 mt-1"},Se={class:"col-12 col-md-4"},Me={class:"col-12 mt-1"},De={class:"col-12 col-md-4"},Ge={class:"col-12 mt-1"},Ke={class:"row justify-content-end mt-3"},Pe={class:"col-12 col-sm-12 text-end"};function Ae(s,e,V,r,x,M){const U=n("UserOutlined"),$=n("a-avatar"),m=n("a-button"),R=n("a-upload"),u=n("a-input"),p=n("a-select"),I=n("QuestionCircleOutlined"),B=n("a-tooltip"),y=n("a-radio"),v=n("a-radio-group"),_=n("a-divider"),T=n("a-textarea"),h=n("a-card"),f=n("a-tab-pane"),w=n("a-radio-button"),g=n("a-input-password"),j=n("a-tabs");return z(),E(F,null,[e[109]||(e[109]=t("div",{class:"d-flex row"},[t("span",{class:"fs-4 col-12"},"Cài đặt tài khoản"),t("span",{class:"col-12 text-secondary fst-italic"},"Quản lý thông tin cá nhân và tùy chỉnh cài đặt tài khoản của bạn")],-1)),t("div",Z,[a(j,{activeKey:s.activeKey,"onUpdate:activeKey":e[23]||(e[23]=l=>s.activeKey=l),type:"card",class:"row"},{default:o(()=>[a(f,{key:"information",tab:"Thông tin cá nhân"},{default:o(()=>[a(h,{class:"mt-2"},{default:o(()=>[e[49]||(e[49]=t("h3",{class:"fw-bold"},"Thông tin cá nhân",-1)),e[50]||(e[50]=t("span",{class:"text-secondary"},"Cập nhật thông tin cá nhân của bạn",-1)),t("div",ee,[t("div",te,[a($,{size:120,src:s.getAvatarUrl(s.user),class:"user-avatar"},{icon:o(()=>[a(U)]),_:1},8,["src"]),a(R,{"show-upload-list":!1,accept:"image/*"},{default:o(()=>[a(m,{type:"primary",class:"mt-2"},{default:o(()=>e[24]||(e[24]=[t("span",null,[t("i",{class:"bi bi-upload me-2"}),d("Đổi ảnh")],-1)])),_:1})]),_:1})]),t("form",{onSubmit:e[7]||(e[7]=O((...l)=>s.changeInformation&&s.changeInformation(...l),["prevent"])),class:"col-12 col-md-10 mt-3 mt-md-0"},[t("div",se,[t("div",le,[e[26]||(e[26]=t("div",{class:"col-12 col-sm-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"},"*"),t("span",{class:"fw-bold"},"Họ và tên")])],-1)),e[27]||(e[27]=t("div",{class:"w-100"},null,-1)),t("div",ae,[a(u,{value:s.name,"onUpdate:value":e[0]||(e[0]=l=>s.name=l),placeholder:s.user.name,"allow-clear":""},null,8,["value","placeholder"]),e[25]||(e[25]=t("div",{class:"w-100"},null,-1))])]),t("div",oe,[e[29]||(e[29]=t("div",{class:"col-12 col-sm-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"},"*"),t("span",{class:"fw-bold"},"Phòng/Khoa/Đơn vị")])],-1)),t("div",ne,[t("div",ce,[a(p,{value:s.selectedDepartment,"onUpdate:value":e[1]||(e[1]=l=>s.selectedDepartment=l),"show-search":"",placeholder:"Phòng/Khoa/Đơn vị",style:{width:"100%"},options:s.departments,"filter-option":s.filterOption,"allow-clear":"","list-height":160},null,8,["value","options","filter-option"]),a(B,{placement:"right",title:"Đơn vị của bạn không có trong danh sách? Gửi mail cho admin bằng tài khoản outlock của trường"},{default:o(()=>[a(I,{class:"ms-2 text-primary",style:{"font-size":"18px",cursor:"pointer"},onClick:s.showRequestNewDepartmentModal},null,8,["onClick"])]),_:1})]),e[28]||(e[28]=t("div",{class:"w-100"},null,-1))])]),t("div",ie,[e[31]||(e[31]=t("div",{class:"col-12 col-sm-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"},"*"),t("span",{class:"fw-bold"},"Vai trò")])],-1)),t("div",de,[t("div",re,[a(p,{value:s.selectedRoll,"onUpdate:value":e[2]||(e[2]=l=>s.selectedRoll=l),"show-search":"",placeholder:"Vai trò",style:{width:"100%"},options:s.rolls,"filter-option":s.filterOption,"allow-clear":"","list-height":160},null,8,["value","options","filter-option"])]),e[30]||(e[30]=t("div",{class:"w-100"},null,-1))])])]),t("div",me,[t("div",ue,[e[34]||(e[34]=t("div",{class:"col-12 col-sm-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"},"*"),t("span",{class:"fw-bold"},"Email")])],-1)),e[35]||(e[35]=t("div",{class:"w-100"},null,-1)),t("div",pe,[a(B,{placement:"topRight"},{title:o(()=>e[32]||(e[32]=[t("span",{class:""},"Email không thể thay đổi",-1)])),default:o(()=>[a(u,{value:s.email,"onUpdate:value":e[3]||(e[3]=l=>s.email=l),placeholder:s.user.email,disabled:""},null,8,["value","placeholder"])]),_:1}),e[33]||(e[33]=t("div",{class:"w-100"},null,-1))])]),t("div",ve,[e[37]||(e[37]=t("div",{class:"col-12 col-sm-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Số điện thoại")])],-1)),e[38]||(e[38]=t("div",{class:"w-100"},null,-1)),t("div",_e,[a(u,{value:s.phone,"onUpdate:value":e[4]||(e[4]=l=>s.phone=l),placeholder:s.user.phone||"Cập nhật số điện thoại",type:"tel",pattern:"[0-9]{10}","allow-clear":""},null,8,["value","placeholder"]),e[36]||(e[36]=t("div",{class:"w-100"},null,-1))])]),t("div",he,[e[42]||(e[42]=t("div",{class:"col-12 col-sm-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Giới tính")])],-1)),e[43]||(e[43]=t("div",{class:"w-100"},null,-1)),t("div",fe,[a(v,{value:s.sex,"onUpdate:value":e[5]||(e[5]=l=>s.sex=l),name:"radioGroup"},{default:o(()=>[a(y,{value:"Male"},{default:o(()=>e[39]||(e[39]=[d("Nam")])),_:1}),a(y,{value:"Female"},{default:o(()=>e[40]||(e[40]=[d("Nữ")])),_:1})]),_:1},8,["value"]),e[41]||(e[41]=t("div",{class:"w-100"},null,-1))])])]),a(_,{style:{"border-color":"#7cb305"},dashed:""}),t("div",we,[e[45]||(e[45]=t("div",{class:"col-12 col-sm-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Giới thiệu")])],-1)),e[46]||(e[46]=t("div",{class:"w-100"},null,-1)),t("div",ge,[a(T,{value:s.description,"onUpdate:value":e[6]||(e[6]=l=>s.description=l),placeholder:s.user.description||"Cập nhật mô tả bản thân",rows:"3","show-count":!0,maxlength:500,"allow-clear":""},null,8,["value","placeholder"]),e[44]||(e[44]=t("div",{class:"w-100"},null,-1))])]),t("div",be,[t("div",Ne,[a(m,{type:"primary",onClick:s.changeInformation,class:"mt-2"},{default:o(()=>e[47]||(e[47]=[t("span",null,[t("i",{class:"bi bi-save me-2"}),d("Lưu thay đổi")],-1)])),_:1},8,["onClick"])]),e[48]||(e[48]=t("div",{class:"w-100"},null,-1))])],32)])]),_:1})]),_:1}),Q("",!0),a(f,{key:"user_interface",tab:"Giao diện","force-render":""},{default:o(()=>[a(h,{class:"mt-2"},{default:o(()=>[e[90]||(e[90]=t("h3",{class:"fw-bold"},"Tùy chỉnh giao diện",-1)),e[91]||(e[91]=t("span",{class:"text-secondary"},"Điều chỉnh giao diện theo sở thích",-1)),t("div",Ve,[t("form",{onSubmit:e[18]||(e[18]=O((...l)=>s.changeInformation&&s.changeInformation(...l),["prevent"])),class:"col-12 mt-3"},[t("div",xe,[t("div",Be,[e[82]||(e[82]=t("div",{class:"col-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Chế độ hiển thị")])],-1)),e[83]||(e[83]=t("div",{class:"w-100"},null,-1)),t("div",ye,[a(v,{value:s.theme_color,"onUpdate:value":e[16]||(e[16]=l=>s.theme_color=l),name:"radioGroup",class:"row",size:"large"},{default:o(()=>[a(w,{class:"col mx-2 text-center",value:"bright"},{default:o(()=>e[78]||(e[78]=[t("span",null,[t("i",{class:"bi bi-brightness-high me-2"}),d("Sáng ")],-1)])),_:1}),a(w,{class:"col mx-2 text-center",value:"dark"},{default:o(()=>e[79]||(e[79]=[t("span",null,[t("i",{class:"bi bi-moon me-2"}),d("Tối ")],-1)])),_:1}),a(w,{class:"col mx-2 text-center",value:"system"},{default:o(()=>e[80]||(e[80]=[t("span",null,[t("i",{class:"bi bi-laptop me-2"}),d("Hệ thống ")],-1)])),_:1})]),_:1},8,["value"]),e[81]||(e[81]=t("div",{class:"w-100"},null,-1))])])]),a(_,{style:{"border-color":"#b3b3b3"}}),t("div",ke,[e[86]||(e[86]=t("div",{class:"col-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Ngôn ngữ")])],-1)),e[87]||(e[87]=t("div",{class:"w-100"},null,-1)),t("div",Ce,[t("div",Ue,[e[84]||(e[84]=t("span",{class:"col-2 text-center pe-0"},[t("i",{class:"bi bi-globe"})],-1)),a(p,{value:s.language,"onUpdate:value":e[17]||(e[17]=l=>s.language=l),options:s.languages,style:{width:"100%"},placeholder:"Chọn ngôn ngữ","allow-clear":"",class:"col px-0"},null,8,["value","options"])]),e[85]||(e[85]=t("div",{class:"w-100"},null,-1))])]),t("div",$e,[t("div",Re,[a(m,{type:"primary",onClick:s.changeUserInterface,class:"mt-2"},{default:o(()=>e[88]||(e[88]=[t("span",null,[t("i",{class:"bi bi-save me-2"}),d("Lưu thay đổi")],-1)])),_:1},8,["onClick"])]),e[89]||(e[89]=t("div",{class:"w-100"},null,-1))])],32)])]),_:1})]),_:1}),a(f,{key:"security",tab:"Bảo mật","force-render":""},{default:o(()=>[a(h,{class:"mt-2"},{default:o(()=>[e[107]||(e[107]=t("h3",{class:"fw-bold"},"Bảo mật tài khoản",-1)),e[108]||(e[108]=t("span",{class:"text-secondary"},"Quản lý mật khẩu và bảo mật tài khoản của bạn",-1)),t("div",Ie,[e[106]||(e[106]=t("div",{class:"col-12 align-items-center"},[t("span",null,"Thay đổi mật khẩu")],-1)),t("form",{onSubmit:e[22]||(e[22]=O((...l)=>s.changeInformation&&s.changeInformation(...l),["prevent"])),class:"col-12 mt-3"},[t("div",Te,[t("div",je,[e[94]||(e[94]=t("div",{class:"col-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Mật khẩu hiện tại")])],-1)),e[95]||(e[95]=t("div",{class:"w-100"},null,-1)),t("div",Oe,[a(g,{value:s.current_password,"onUpdate:value":e[19]||(e[19]=l=>s.current_password=l),placeholder:"Nhập mật khẩu hiện tại","allow-clear":"",class:"mb-2"},{addonBefore:o(()=>e[92]||(e[92]=[t("i",{class:"bi bi-key"},null,-1)])),_:1},8,["value"]),e[93]||(e[93]=t("div",{class:"w-100"},null,-1))])]),t("div",Se,[e[98]||(e[98]=t("div",{class:"col-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Mật khẩu mới")])],-1)),e[99]||(e[99]=t("div",{class:"w-100"},null,-1)),t("div",Me,[a(g,{value:s.new_password,"onUpdate:value":e[20]||(e[20]=l=>s.new_password=l),placeholder:"Nhập mật khẩu mới","allow-clear":"",class:"mb-2"},{addonBefore:o(()=>e[96]||(e[96]=[t("i",{class:"bi bi-key"},null,-1)])),_:1},8,["value"]),e[97]||(e[97]=t("div",{class:"w-100"},null,-1))])]),t("div",De,[e[102]||(e[102]=t("div",{class:"col-12 text-start align-self-center"},[t("label",null,[t("span",{class:"text-danger me-1"}),t("span",{class:"fw-bold"},"Xác nhận mật khẩu mới")])],-1)),e[103]||(e[103]=t("div",{class:"w-100"},null,-1)),t("div",Ge,[a(g,{value:s.new_password_confirmation,"onUpdate:value":e[21]||(e[21]=l=>s.new_password_confirmation=l),placeholder:"Xác nhận mật khẩu mới","allow-clear":"",class:"mb-2"},{addonBefore:o(()=>e[100]||(e[100]=[t("i",{class:"bi bi-key"},null,-1)])),_:1},8,["value"]),e[101]||(e[101]=t("div",{class:"w-100"},null,-1))])])]),a(_,{style:{"border-color":"#b3b3b3"}}),t("div",Ke,[t("div",Pe,[a(m,{type:"primary",onClick:s.changePassword,class:"mt-2"},{default:o(()=>e[104]||(e[104]=[t("span",null,[t("i",{class:"bi bi-save me-2"}),d("Lưu thay đổi")],-1)])),_:1},8,["onClick"])]),e[105]||(e[105]=t("div",{class:"w-100"},null,-1))])],32)])]),_:1})]),_:1})]),_:1},8,["activeKey"])])],64)}const He=P(Y,[["render",Ae]]);export{He as S};
