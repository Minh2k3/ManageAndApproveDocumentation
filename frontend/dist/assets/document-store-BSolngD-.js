import{a0 as k,g as n,G as a}from"./index-u6IXU-LR.js";const z=k("document",()=>{const u=n([]),_=n(!1),l=n([]),w=n(!1),i=n([]),d=n(!1),m=n([]),f=n(!1),p=n([]),$=n(!1),g=n([]),s=n(!1),v=n([]),D=n([]),y=n([]),h=n([]),r=n([]);async function E(t=!1){if(!(_.value&&!t))try{const e=await a.get("/api/document-types");e.data&&(console.log("response document types: ",e.data),u.value=e.data.document_types)}catch(e){console.error("Error fetching document types:",e)}}async function S(t=!1){if(!(w.value&&!t))try{const e=await a.get("api/document-flows");e.data&&(console.log("response.data",e.data),l.value=e.data.document_flow_templates)}catch(e){console.error("Error fetching document flow templates:",e)}}async function T(t=!1){if(!(d.value&&!t))try{const e=await a.get("api/user/document-templates");e.data&&(console.log("response.data",e.data),i.value=e.data.document_templates,d.value=!0)}catch(e){console.error("Error fetching document templates:",e)}}async function C(t,e=!1){if(!(f.value&&!e))try{const o=await a.get(`api/template-user/${t}/`);m.value=o.data,o.data?(this.template_user=o.data,f.value=!0):this.template_user=null}catch(o){console.error("Error fetching template user:",o)}}async function J(t){try{const e=await a.get(`api/document-flow-steps/${t}/`);e.data&&(console.log("Document_flow_step: "+JSON.stringify(e.data,null,2)),p.value=e.data.map(o=>({document_flow_id:o.document_flow_id,step:o.step,multichoice:o.multichoice,department_id:o.department_id,approver_id:o.approver_id})))}catch(e){console.error("Error fetching document flow steps:",e)}}async function F(t,e=!1){if(!(s.value&&!e))try{const o=await a.get(`api/approvers/${t}/documents`);o.data&&(s.value=!0,console.log("response.data",o.data),g.value=o.data.documents)}catch(o){console.error("Error fetching documents:",o)}}async function N(t){try{const e=await a.get(`api/documents/${t}/comments`);e.data&&(console.log("Document_comments: "+JSON.stringify(e.data,null,2)),v.value=e.data)}catch(e){console.error("Error fetching document comments:",e)}}async function O(t,e){try{let o;e?o=await a.get(`api/document/${t}/fm`):o=await a.get(`api/document/${t}/nm`),o.data&&(y.value=o.data.document,console.log("Current document: ",y.value))}catch(o){console.error("Error fetching document by ID:",o)}}async function j(t){try{const e=await a.get(`api/document-flows/${t}/steps`);e.data&&(console.log("Document_flow_step: "+JSON.stringify(e.data,null,2)),D.value=e.data)}catch(e){console.error("Error fetching document flow steps:",e)}}async function I(t){try{const e=await a.get(`create-certificate/${t}`);if(e.data)return console.log("Create certificate response: ",e.data),e.data}catch(e){console.error("Error creating certificate:",e)}}async function b(t){try{const e=await a.post(`api/document-steps/${t}/approve`);if(e.data)return console.log("Approve document response: ",e.data),e.data}catch(e){console.error("Error approving document:",e)}}async function x(t,e){try{const o=await a.post(`api/document-steps/${t}/reject`,e);if(o.data)return console.log("Reject document response: ",o.data),o.data}catch(o){console.error("Error rejecting document:",o)}}async function A(t){try{const e=await a.get(`api/documents/${t}/versions`);e.data&&(console.log("Document version: "+JSON.stringify(e.data.versions,null,2)),h.value=[...e.data.versions],console.log("Current document versions: ",h.value))}catch(e){console.error("Error fetching document version:",e)}}function B(t){console.log("data bên nhận:",t),console.log("typeof data:",typeof t),r.value=JSON.parse(JSON.stringify(t)),console.log("sau gán:",r.value)}function U(){const t=r.value;return r.value=[],t}async function G(t,e,o){try{const c=await a.post("api/documents/sign-document",{version_id:t,step_id:e,document_id:o});if(c.data)return console.log("Sign document response: ",c.data),c.data}catch(c){console.error("Error signing document:",c)}}function R(){u.value=[],_.value=!1,l.value=[],w.value=!1,i.value=[],d.value=!1,m.value=[],f.value=!1,p.value=[],$.value=!1,g.value=[],s.value=!1,v.value=[]}async function V(t){await E(),await S(),await F(t)}return{document_types:u,document_flow_templates:l,document_templates:i,template_user:m,document_flow_steps:p,documents:g,isFetchedDocuments:s,document_comments:v,current_document_flow_steps:D,current_document:y,current_document_versions:h,current_document_data:r,fetchDocumentTypes:E,fetchDocumentFlowTemplates:S,fetchDocumentTemplates:T,fetchTemplateUser:C,fetchDocumentFlowSteps:J,fetchDocuments:F,fetchDocumentComments:N,fetchDocumentById:O,fetchStepsByDocumentFlowId:j,approveDocument:b,rejectDocument:x,getDocumentVersions:A,setCurrentDocumentData:B,getCurrentDocumentData:U,signDocument:G,createCertificate:I,fetchAll:V,reset:R}});export{z as u};
