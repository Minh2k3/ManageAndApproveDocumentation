import{u as D}from"./use-menu-CIRKYwAT.js";import{_ as j,d as B,A as f,w as l,r as m,q as $,e as N,f as T,z as A,o,b as s,a as y,J as I,c,F as w,m as R,p as L,l as d,D as p}from"./index-Ba8l0gpi.js";import{u as M}from"./document-store-D3-2n2Ps.js";import"./pdfjs-CqkleIqs.js";const V=B({setup(){D().onSelectedKeys(["approver-documents"]);const t=M(),a=$(),v=N([]);T(async()=>{await t.fetchDocuments(a.user.id),v.value=t.documents});const b=[{title:"Tên văn bản",key:"title",dataIndex:"title",width:200,sorter:(n,r)=>n.title.localeCompare(r.title),sortDirections:["ascend","descend"],customHeaderCell:()=>({style:{textAlign:"center"}})},{title:"Loại văn bản",key:"type",dataIndex:"type",width:150,sorter:(n,r)=>n.type.localeCompare(r.type),sortDirections:["ascend","descend"],customHeaderCell:()=>({style:{textAlign:"center"}})},{title:"Người đề xuất",key:"creator_name",dataIndex:"creator_name",width:200,sorter:(n,r)=>n.creator_name.localeCompare(r.creator_name),sortDirections:["ascend","descend"],align:"center"},{title:"Trạng thái",key:"status",dataIndex:"status",width:120,sorter:(n,r)=>{const u={draft:1,in_review:2,approved:3,rejected:4};return u[n.status]-u[r.status]},sortDirections:["ascend","descend"],align:"center"},{title:"Ngày tạo",key:"created_at",dataIndex:"created_at",width:150,sorter:(n,r)=>{const u=n.created_at.split(" ")[1].split("/").reverse().join("-")+" "+n.created_at.split(" ")[0],_=r.created_at.split(" ")[1].split("/").reverse().join("-")+" "+r.created_at.split(" ")[0];return u.localeCompare(_)},sortDirections:["ascend","descend"],align:"center"},{title:"Ngày cập nhật",key:"updated_at",dataIndex:"updated_at",width:150,sorter:(n,r)=>{const u=n.updated_at.split(" ")[1].split("/").reverse().join("-")+" "+n.updated_at.split(" ")[0],_=r.updated_at.split(" ")[1].split("/").reverse().join("-")+" "+r.updated_at.split(" ")[0];return u.localeCompare(_)},sortDirections:["ascend","descend"],align:"center"}],g=A();return{documents:v,columns:b,customRow:n=>({onClick:()=>{g.push(`documents/${n.id}`)},style:{cursor:"pointer"}})}}}),O={class:"row my-3"},U={class:"d-flex justify-content-end align-items-center"},z={class:"row mb-3"},F=["onClick","onMouseover"],H={class:"d-flex justify-content-between align-items-center"},q={class:"fw-bold fs-6"},E={class:"fw-bold fs-3"},J={class:"row mb-3"},K={class:"d-flex flex-wrap gap-2 w-100 align-items-center"},Q={class:"flex-grow-1",style:{"min-width":"250px"}},W={class:"d-flex gap-2 flex-wrap justify-content-end ms-auto"},G={class:"row"},P={class:"col-12"},X={key:0},Y={class:""},Z={key:0,class:"bg-primary text-white p-1 rounded rounded-1 border border-1"},ee={key:1,class:"bg-warning text-white p-1 rounded rounded-1 border border-1"},te={key:2,class:"bg-success text-white p-1 rounded rounded-1 border border-1"},se={key:0,class:"text-secondary"},oe={key:1,class:"text-primary"},ne={key:2,class:"text-success"},ae={key:3,class:"text-danger"};function re(t,a,v,b,g,x){const n=m("router-link"),r=m("a-button"),u=m("a-input-search"),_=m("a-select"),h=m("a-tooltip"),C=m("a-table"),S=m("a-card");return o(),f(S,{title:"",style:{width:"100%"}},{default:l(()=>[a[6]||(a[6]=s("h2",{class:"fw-bold mb-3"},"Quản Lý Văn Bản",-1)),s("div",O,[s("div",U,[y(r,{type:"primary",class:"col-6 col-sm-4"},{default:l(()=>[y(n,{to:"documents/create",class:"text-decoration-none"},{default:l(()=>a[4]||(a[4]=[s("i",{class:"fa-solid fa-add me-2"},null,-1),I("Tạo văn bản mới ")])),_:1})]),_:1})])]),s("div",z,[(o(!0),c(w,null,R(t.statusList,e=>(o(),c("div",{key:e.key,class:"col-5 col-md mb-2 mb-md-0 border rounded-2 mx-2 p-3 cursor-pointer",style:L({backgroundColor:t.selectedStatus===e.key?e.color:t.hovered===e.key?"#f0f0f0":"#ffffff",borderColor:t.selectedStatus===e.key||t.hovered===e.key?e.borderColor:"#dee2e6",borderWidth:"2px",borderStyle:"solid",color:t.selectedStatus===e.key?"#fff":"#000",transition:"0.2s"}),onClick:k=>t.selectedStatus=e.key,onMouseover:k=>t.hovered=e.key,onMouseleave:a[0]||(a[0]=k=>t.hovered=null)},[s("div",H,[s("span",q,d(e.label),1),s("span",E,d(e.count),1)])],44,F))),128))]),s("div",J,[s("div",K,[s("div",Q,[y(u,{placeholder:"Tìm kiếm","allow-clear":"","enter-button":"",class:"w-100"})]),s("div",W,[y(_,{class:"col",value:t.status_id,"onUpdate:value":a[1]||(a[1]=e=>t.status_id=e),"show-search":"",placeholder:"Trạng thái",options:t.documents_status,"filter-option":t.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),y(_,{class:"col",value:t.type_id,"onUpdate:value":a[2]||(a[2]=e=>t.type_id=e),"show-search":"",placeholder:"Loại văn bản",options:t.documents_type,"filter-option":t.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),y(_,{class:"col",value:t.department_id,"onUpdate:value":a[3]||(a[3]=e=>t.department_id=e),"show-search":"",placeholder:"Đơn vị đề xuất",options:t.documents_creator,"filter-option":t.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),y(r,{class:"col",type:"primary"},{default:l(()=>a[5]||(a[5]=[s("i",{class:"fa-solid fa-filter"},null,-1)])),_:1})])])]),s("div",G,[s("div",P,[y(C,{dataSource:t.documents,columns:t.columns,scroll:{x:576},bordered:"",customRow:t.customRow,showSorterTooltip:!1},{headerCell:l(({column:e})=>[e.key==="name"?(o(),f(h,{key:0,title:"Sắp xếp theo tên văn bản"},{default:l(()=>[s("span",null,d(e.title),1)]),_:2},1024)):e.key==="type"?(o(),f(h,{key:1,title:"Sắp xếp theo loại văn bản"},{default:l(()=>[s("span",null,d(e.title),1)]),_:2},1024)):e.key==="status"?(o(),f(h,{key:2,title:"Sắp xếp theo trạng thái"},{default:l(()=>[s("span",null,d(e.title),1)]),_:2},1024)):e.key==="created_at"?(o(),f(h,{key:3,title:"Sắp xếp theo ngày tạo"},{default:l(()=>[s("span",null,d(e.title),1)]),_:2},1024)):e.key==="updated_at"?(o(),f(h,{key:4,title:"Sắp xếp theo ngày cập nhật"},{default:l(()=>[s("span",null,d(e.title),1)]),_:2},1024)):p("",!0)]),bodyCell:l(({column:e,index:k,record:i})=>[e.key==="index"?(o(),c("span",X,d(k+1),1)):p("",!0),e.key==="creator_name"?(o(),f(h,{key:1},{title:l(()=>[s("span",Y,d(i.roll),1)]),default:l(()=>[s("span",null,d(i.creator_name),1)]),_:2},1024)):p("",!0),e.key==="type"?(o(),c(w,{key:2},[i.type_id==1?(o(),c("span",Z,d(i.type),1)):p("",!0),i.type_id==2?(o(),c("span",ee,d(i.type),1)):p("",!0),i.type_id==3?(o(),c("span",te,d(i.type),1)):p("",!0)],64)):p("",!0),e.key==="status"?(o(),c(w,{key:3},[i.status==="draft"?(o(),c("span",se,"Bản nháp")):p("",!0),i.status==="in_review"?(o(),c("span",oe,"Chờ duyệt")):p("",!0),i.status==="approved"?(o(),c("span",ne,"Đã duyệt")):p("",!0),i.status==="rejected"?(o(),c("span",ae,"Bị từ chối")):p("",!0)],64)):p("",!0)]),_:1},8,["dataSource","columns","customRow"])])])]),_:1})}const pe=j(V,[["render",re]]);export{pe as default};
