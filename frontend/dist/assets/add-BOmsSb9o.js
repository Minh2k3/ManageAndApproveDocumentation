import{_ as C,d as M,c as d,a,w as p,r as c,E as T,e as k,G as L,H as O,I as E,o as i,b as s,J as _,D as v,K as f,l as w}from"./index-Ba8l0gpi.js";import{u as j}from"./use-menu-CIRKYwAT.js";import{_ as H}from"./Cosette-C9hW4cDG.js";import"./pdfjs-CqkleIqs.js";const N=M({setup(){j().onSelectedKeys(["admin-users"]);const l=k([]),e=k([]),r=L({username:"",name:"",email:"",password:"",password_confirmation:"",department_id:[],status_id:[]}),u=k({}),y=()=>{E.get("http://127.0.0.1:8000/api/users/create").then(t=>{l.value=t.data.users_status,e.value=t.data.departments}).catch(t=>{console.error(t)})},b=(t,m)=>m.label.toLowerCase().indexOf(t.toLowerCase())>=0,g=k(null),n=k(null),h=()=>{E.post("http://127.0.0.1:8000/api/users",r).then(t=>{console.log(t.data),u.value={},g.value=null,n.value=null,alert("Tạo tài khoản thành công!"),r.username="",r.name="",r.email="",r.password="",r.password_confirmation="",r.department_id=[],r.status_id=[]}).catch(t=>{if(t.response&&t.response.data&&t.response.data.errors){u.value=t.response.data.errors,console.log(u.value);const m=Object.keys(u.value)[0];g.value=m,n.value=u.value[m][0],console.log("trường bị lỗi: "+g.value),console.log("tên lỗi: "+n.value)}})};return y(),{users_status:l,departments:e,...O(r),errors:u,filterOption:b,createUsers:h,firstFieldError:g,firstError:n}}}),V={class:"row"},$={class:"col-12 col-sm-4"},B={class:"row"},I={class:"col-12 justify-content-center d-flex mb-3"},S={class:"col-12 justify-content-center d-flex"},z={class:"col-12 col-sm-8"},D={class:"row"},K={class:"col-12 col-sm-5"},P={key:0,class:"text-danger"},Y={class:"row mt-3"},q={class:"col-12 col-sm-5"},A={key:0,class:"text-danger"},G={class:"row mt-3"},J={class:"col-12 col-sm-5"},R={key:0,class:"text-danger"},X={class:"row mt-3"},Q={class:"col-12 col-sm-5"},W={key:0,class:"text-danger"},Z={class:"row mt-3"},x={class:"col-12 col-sm-5"},ss={class:"d-flex"},es={key:0,class:"text-danger mt-1 d-block"},ls={class:"row mt-3"},ts={class:"col-12 col-sm-5"},os={key:0,class:"text-danger"},as={class:"row mt-3"},rs={class:"col-12 col-sm-5"},ns={key:0,class:"text-danger"},ds={class:"row mt-5"},is={class:"col-12 d-grid justify-content-sm-end d-sm-flex mx-auto"};function us(l,e,r,u,y,b){const g=c("a-avatar"),n=c("a-button"),h=c("a-select"),t=c("a-input"),m=c("a-input-password"),F=c("router-link"),U=c("a-card");return i(),d("form",{onSubmit:e[7]||(e[7]=T((...o)=>l.createUsers&&l.createUsers(...o),["prevent"]))},[a(U,{title:"Tạo mới tài khoản"},{default:p(()=>[s("div",V,[s("div",$,[s("div",B,[s("div",I,[a(g,{shape:"square",size:200},{icon:p(()=>e[8]||(e[8]=[s("img",{src:H,alt:"Avatar"},null,-1)])),_:1})]),s("div",S,[a(n,{type:"primary"},{default:p(()=>e[9]||(e[9]=[s("i",{class:"fa-solid fa-plus me-2"},null,-1),_(" Chọn ảnh ")])),_:1})])])]),s("div",z,[s("div",D,[e[11]||(e[11]=s("div",{class:"col-12 col-sm-3 text-start text-sm-end align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Tình trạng")])],-1)),s("div",K,[a(h,{value:l.status_id,"onUpdate:value":e[0]||(e[0]=o=>l.status_id=o),"show-search":"",placeholder:"Tình trạng",style:{width:"100%"},options:l.users_status,"filter-option":l.filterOption,"allow-clear":"",class:f({"select-danger":l.firstFieldError==="status_id"})},null,8,["value","options","filter-option","class"]),e[10]||(e[10]=s("div",{class:"w-100"},null,-1)),l.errors.status_id&&l.firstFieldError==="status_id"?(i(),d("small",P,w(l.errors.status_id[0]),1)):v("",!0)])]),s("div",Y,[e[13]||(e[13]=s("div",{class:"col-12 col-sm-3 text-start text-sm-end align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Tên tài khoản")])],-1)),s("div",q,[a(t,{value:l.username,"onUpdate:value":e[1]||(e[1]=o=>l.username=o),placeholder:"Himakevolution","allow-clear":"",class:f({"input-danger":l.firstFieldError==="username"})},null,8,["value","class"]),e[12]||(e[12]=s("div",{class:"w-100"},null,-1)),l.errors.username&&l.firstFieldError==="username"?(i(),d("small",A,w(l.errors.username[0]),1)):v("",!0)])]),s("div",G,[e[15]||(e[15]=s("div",{class:"col-12 col-sm-3 text-start text-sm-end align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Họ và tên")])],-1)),s("div",J,[a(t,{value:l.name,"onUpdate:value":e[2]||(e[2]=o=>l.name=o),placeholder:"Trần Tuấn Minh","allow-clear":"",class:f({"input-danger":l.firstFieldError==="name"})},null,8,["value","class"]),e[14]||(e[14]=s("div",{class:"w-100"},null,-1)),l.errors.name&&l.firstFieldError==="name"?(i(),d("small",R,w(l.errors.name[0]),1)):v("",!0)])]),s("div",X,[e[17]||(e[17]=s("div",{class:"col-12 col-sm-3 text-start text-sm-end align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Email")])],-1)),s("div",Q,[a(t,{value:l.email,"onUpdate:value":e[3]||(e[3]=o=>l.email=o),placeholder:"2151062831@e.tlu.edu.vn","allow-clear":"",class:f({"input-danger":l.firstFieldError==="email"})},null,8,["value","class"]),e[16]||(e[16]=s("div",{class:"w-100"},null,-1)),l.errors.email&&l.firstFieldError==="email"?(i(),d("small",W,w(l.errors.email[0]),1)):v("",!0)])]),s("div",Z,[e[19]||(e[19]=s("div",{class:"col-12 col-sm-3 text-start text-sm-end align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Phòng ban")])],-1)),s("div",x,[s("div",ss,[a(h,{value:l.department_id,"onUpdate:value":e[4]||(e[4]=o=>l.department_id=o),"show-search":"",placeholder:"Phòng ban",style:{width:"100%"},options:l.departments,"filter-option":l.filterOption,"allow-clear":"",class:f({"select-danger":l.firstFieldError==="department_id"})},null,8,["value","options","filter-option","class"]),a(n,{type:"default",class:"ms-2",style:{"background-color":"#d9d9d9"}},{default:p(()=>e[18]||(e[18]=[s("i",{class:"fa-solid fa-plus"},null,-1)])),_:1})]),l.errors.department_id&&l.firstFieldError==="department_id"?(i(),d("small",es,w(l.errors.department_id[0]),1)):v("",!0)])]),s("div",ls,[e[21]||(e[21]=s("div",{class:"col-12 col-sm-3 text-start text-sm-end align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Mật khẩu")])],-1)),s("div",ts,[a(m,{value:l.password,"onUpdate:value":e[5]||(e[5]=o=>l.password=o),placeholder:"abcILoveYou123","allow-clear":"",class:f({"input-danger":l.firstFieldError==="password"&&l.firstError!=="Mật khẩu không khớp."})},null,8,["value","class"]),e[20]||(e[20]=s("div",{class:"w-100"},null,-1)),l.errors.password&&l.firstFieldError==="password"&&l.firstError!=="Mật khẩu không khớp."?(i(),d("small",os,w(l.errors.password[0]),1)):v("",!0)])]),s("div",as,[e[23]||(e[23]=s("div",{class:"col-12 col-sm-3 text-start text-sm-end align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Xác nhận mật khẩu")])],-1)),s("div",rs,[a(m,{value:l.password_confirmation,"onUpdate:value":e[6]||(e[6]=o=>l.password_confirmation=o),placeholder:"abcILoveYou123","allow-clear":"",class:f({"input-danger":l.firstFieldError==="password"&&l.firstError==="Mật khẩu không khớp."})},null,8,["value","class"]),e[22]||(e[22]=s("div",{class:"w-100"},null,-1)),l.errors.password&&l.firstFieldError==="password"&&l.firstError==="Mật khẩu không khớp."?(i(),d("small",ns," Mật khẩu không khớp. ")):v("",!0)])]),s("div",ds,[s("div",is,[a(n,{type:"default",class:"",style:{"background-color":"#d9d9d9"}},{default:p(()=>[a(F,{to:{name:"admin-users"}},{default:p(()=>e[24]||(e[24]=[s("span",null,"Hủy",-1)])),_:1})]),_:1}),a(n,{type:"primary",class:"ms-0 ms-sm-2 mt-2 mt-sm-0","html-type":"submit"},{default:p(()=>e[25]||(e[25]=[_(" Lưu ")])),_:1})])])])])]),_:1})],32)}const fs=C(N,[["render",us]]);export{fs as default};
