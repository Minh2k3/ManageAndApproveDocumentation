import{_ as E,e as R,c as p,b as o,d as i,r as m,J as F,g as c,i as U,B as T,K as A,L as N,o as f,a as e,N as k,I as _,n as C,q as h}from"./index-ixtV8ZqQ.js";import{u as O}from"./use-menu-Dt9qxgnu.js";import{u as V}from"./use-register-D8a-qxym.js";import{_ as j}from"./Cosette-C9hW4cDG.js";const B=R({setup(){O().onSelectedKeys(["admin-users"]);const l=V(),s=c([]),w=c([]);U(async()=>{await l.fetchRegisterForm(),s.value=l.departments,w.value=l.rolls,console.log("Đã gọi hàm getUsersRegister()")});const a=T({username:"",name:"",email:"",password:"",password_confirmation:"",department_id:[],status_id:[]}),d=c({}),b=(r,t)=>t.label.toLowerCase().indexOf(r.toLowerCase())>=0,u=c(null),n=c(null),g=()=>{N.post("http://127.0.0.1:8000/api/users",a).then(r=>{console.log(r.data),d.value={},u.value=null,n.value=null,alert("Tạo tài khoản thành công!"),a.username="",a.name="",a.email="",a.password="",a.password_confirmation="",a.department_id=[],a.status_id=[]}).catch(r=>{if(r.response&&r.response.data&&r.response.data.errors){d.value=r.response.data.errors,console.log(d.value);const t=Object.keys(d.value)[0];u.value=t,n.value=d.value[t][0],console.log("trường bị lỗi: "+u.value),console.log("tên lỗi: "+n.value)}})},v=()=>{console.log("Thêm phòng ban mới")},y=()=>{console.log("Thêm vai trò mới")};return{departments:s,rolls:w,...A(a),errors:d,filterOption:b,createUsers:g,firstFieldError:u,firstError:n,handleAddDepartment:v,handleAddRoll:y}}}),L={class:"row"},M={class:"col-12 col-lg-4"},S={class:"row"},$={class:"col-12 justify-content-center d-flex mb-3"},D={class:"col-12 justify-content-center d-flex"},q={class:"col-12 col-lg-8"},z={class:"row mt-3"},H={class:"col-12 col-lg-5"},K={key:0,class:"text-danger"},P={class:"row mt-3"},I={class:"col-12 col-lg-5"},J={key:0,class:"text-danger"},G={class:"row mt-3"},Q={class:"col-12 col-lg-5"},W={class:"d-flex"},X={key:0,class:"text-danger mt-1 d-block"},Y={class:"row mt-3"},Z={class:"col-12 col-lg-5"},x={class:"d-flex"},ee={key:0,class:"text-danger mt-1 d-block"},se={class:"row mt-5"},le={class:"col-12 d-grid justify-content-lg-end d-lg-flex mx-auto"};function te(l,s,w,a,d,b){const u=m("a-avatar"),n=m("a-button"),g=m("a-input"),v=m("a-select"),y=m("router-link"),r=m("a-card");return f(),p("form",{onSubmit:s[4]||(s[4]=F((...t)=>l.createUsers&&l.createUsers(...t),["prevent"]))},[o(r,{title:"Tạo mới tài khoản"},{default:i(()=>[e("div",L,[e("div",M,[e("div",S,[e("div",$,[o(u,{shape:"square",size:200},{icon:i(()=>s[5]||(s[5]=[e("img",{src:j,alt:"Avatar"},null,-1)])),_:1})]),e("div",D,[o(n,{type:"primary"},{default:i(()=>s[6]||(s[6]=[e("i",{class:"fa-solid fa-plus me-2"},null,-1),k(" Chọn ảnh ")])),_:1})])])]),e("div",q,[e("div",z,[s[8]||(s[8]=e("div",{class:"col-12 col-lg-3 text-start text-lg-end align-self-center"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Họ và tên")])],-1)),e("div",H,[o(g,{value:l.name,"onUpdate:value":s[0]||(s[0]=t=>l.name=t),placeholder:"Trần Tuấn Minh","allow-clear":"",class:C({"input-danger":l.firstFieldError==="name"})},null,8,["value","class"]),s[7]||(s[7]=e("div",{class:"w-100"},null,-1)),l.errors.name&&l.firstFieldError==="name"?(f(),p("small",K,h(l.errors.name[0]),1)):_("",!0)])]),e("div",P,[s[10]||(s[10]=e("div",{class:"col-12 col-lg-3 text-start text-lg-end align-self-center"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Email")])],-1)),e("div",I,[o(g,{value:l.email,"onUpdate:value":s[1]||(s[1]=t=>l.email=t),placeholder:"2151062831@e.tlu.edu.vn","allow-clear":"",class:C({"input-danger":l.firstFieldError==="email"})},null,8,["value","class"]),s[9]||(s[9]=e("div",{class:"w-100"},null,-1)),l.errors.email&&l.firstFieldError==="email"?(f(),p("small",J,h(l.errors.email[0]),1)):_("",!0)])]),e("div",G,[s[12]||(s[12]=e("div",{class:"col-12 col-lg-3 text-start text-lg-end align-self-center"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Phòng ban")])],-1)),e("div",Q,[e("div",W,[o(v,{value:l.department_id,"onUpdate:value":s[2]||(s[2]=t=>l.department_id=t),"show-search":"",placeholder:"Phòng ban",style:{width:"100%"},options:l.departments,"filter-option":l.filterOption,"allow-clear":"","list-height":150},null,8,["value","options","filter-option"]),o(n,{type:"default",class:"ms-2",onClick:l.handleAddDepartment,style:{"background-color":"#d9d9d9"}},{default:i(()=>s[11]||(s[11]=[e("i",{class:"fa-solid fa-plus"},null,-1)])),_:1},8,["onClick"])]),l.errors.department_id&&l.firstFieldError==="department_id"?(f(),p("small",X,h(l.errors.department_id[0]),1)):_("",!0)])]),e("div",Y,[s[14]||(s[14]=e("div",{class:"col-12 col-lg-3 text-start text-lg-end align-self-center"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Vai trò")])],-1)),e("div",Z,[e("div",x,[o(v,{value:l.selectedRoll,"onUpdate:value":s[3]||(s[3]=t=>l.selectedRoll=t),"show-search":"",placeholder:"Chọn vai trò",style:{width:"100%"},options:l.rolls,"filter-option":l.filterOption,"allow-clear":"","dropdown-match-select-width":!1,"list-height":150},null,8,["value","options","filter-option"]),o(n,{type:"default",class:"ms-2",onClick:l.handleAddRoll,style:{"background-color":"#d9d9d9"}},{default:i(()=>s[13]||(s[13]=[e("i",{class:"fa-solid fa-plus"},null,-1)])),_:1},8,["onClick"])]),l.errors.department_id&&l.firstFieldError==="department_id"?(f(),p("small",ee,h(l.errors.department_id[0]),1)):_("",!0)])]),e("div",se,[e("div",le,[o(n,{type:"default",class:"",style:{"background-color":"#d9d9d9"}},{default:i(()=>[o(y,{to:{name:"admin-users"}},{default:i(()=>s[15]||(s[15]=[e("span",null,"Hủy",-1)])),_:1})]),_:1}),o(n,{type:"primary",class:"ms-0 ms-lg-2 mt-2 mt-lg-0","html-type":"submit"},{default:i(()=>s[16]||(s[16]=[k(" Lưu ")])),_:1})])])])])]),_:1})],32)}const ie=E(B,[["render",te]]);export{ie as default};
