import{u as V}from"./use-menu-CIRKYwAT.js";import{_ as B,d as A,c as i,a as u,w as d,r as y,F as S,q as L,e as D,P as M,i as R,f as j,z as I,o as l,b as o,J as f,m as E,p as O,l as a,D as p,A as b}from"./index-Ba8l0gpi.js";import"./pdfjs-CqkleIqs.js";const P=A({setup(){V().onSelectedKeys(["approver-documents"]);const e=L().user,T=D(!1),g=D({}),x=n=>{g.value=n,T.value=!0,console.log(g.value.id)},h=M();let _=D([]),m=D([]);R(g,async n=>{n?(await h.fetchDocumentFlowSteps(n.id),m.value=h.document_flow_steps.filter(r=>r.document_id===n.id)):m.value=[]}),j(async()=>{await h.fetchDocuments(e.id),_.value=h.documents});const N=[{title:"T√™n vƒÉn b·∫£n",key:"title",dataIndex:"title",width:200,sorter:(n,r)=>n.title.localeCompare(r.title),sortDirections:["ascend","descend"],customHeaderCell:()=>({style:{textAlign:"center"}})},{title:"Lo·∫°i vƒÉn b·∫£n",key:"type",dataIndex:"type",width:150,sorter:(n,r)=>n.type.localeCompare(r.type),sortDirections:["ascend","descend"],customHeaderCell:()=>({style:{textAlign:"center"}})},{title:"Tr·∫°ng th√°i",key:"status",dataIndex:"status",width:120,sorter:(n,r)=>{const w={draft:1,pending:2,approved:3,rejected:4};return w[n.status]-w[r.status]},sortDirections:["ascend","descend"],align:"center"},{title:"Ng√†y t·∫°o",key:"created_at",dataIndex:"created_at",width:150,sorter:(n,r)=>n.created_at.localeCompare(r.created_at),sortDirections:["ascend","descend"],align:"center"},{title:"Ng√†y c·∫≠p nh·∫≠t",key:"updated_at",dataIndex:"updated_at",width:150,sorter:(n,r)=>n.updated_at.localeCompare(r.updated_at),sortDirections:["ascend","descend"],align:"center"},{title:"Thao t√°c",key:"action",responsive:["xxl"],customHeaderCell:()=>({style:{textAlign:"center"}})}],k=I();return{documents:_,columns:N,document_flow_steps:m,detailVisible:T,selectedDocument:g,customRow:n=>({onClick:()=>{x(n)},style:{cursor:"pointer"}}),viewDetail:x,goToEditPage:n=>{k.push(`documents/${n}`)}}}}),U={class:"row my-3"},F={class:"d-flex justify-content-end align-items-center"},H={class:"row mb-3"},z=["onClick","onMouseover"],q={class:"d-flex justify-content-between align-items-center"},J={class:"fw-bold fs-6"},K={class:"fw-bold fs-3"},Q={class:"row mb-3"},W={class:"d-flex flex-wrap gap-2 w-100 align-items-center"},X={class:"flex-grow-1",style:{"min-width":"250px"}},G={class:"d-flex gap-2 flex-wrap justify-content-end ms-auto"},Y={class:"row"},Z={class:"col-12"},ee={key:0},te={key:0,class:"bg-primary text-white p-1 rounded rounded-1 border border-1"},se={key:1,class:"bg-warning text-white p-1 rounded rounded-1 border border-1"},oe={key:2,class:"bg-success text-white p-1 rounded rounded-1 border border-1"},ne={key:0,class:"text-secondary"},le={key:1,class:"text-primary"},ae={key:2,class:"text-success"},de={key:3,class:"text-danger"},re=["href"];function ie(t,e,T,g,x,h){const _=y("router-link"),m=y("a-button"),N=y("a-input-search"),k=y("a-select"),v=y("a-tooltip"),$=y("a-table"),n=y("a-card"),r=y("a-divider"),w=y("a-modal");return l(),i(S,null,[u(n,{title:"",style:{width:"100%"}},{default:d(()=>[e[9]||(e[9]=o("h2",{class:"fw-bold mb-3"},"Qu·∫£n L√Ω VƒÉn B·∫£n",-1)),o("div",U,[o("div",F,[u(m,{type:"primary",class:"col-6 col-sm-4"},{default:d(()=>[u(_,{class:"text-decoration-none",to:"documents/create"},{default:d(()=>e[7]||(e[7]=[o("i",{class:"fa-solid fa-add me-2"},null,-1),f("T·∫°o vƒÉn b·∫£n m·ªõi ")])),_:1})]),_:1})])]),o("div",H,[(l(!0),i(S,null,E(t.statusList,s=>(l(),i("div",{key:s.key,class:"col-5 col-md mb-2 mb-md-0 border rounded-2 mx-2 p-3 cursor-pointer",style:O({backgroundColor:t.selectedStatus===s.key?s.color:t.hovered===s.key?"#f0f0f0":"#ffffff",borderColor:t.selectedStatus===s.key||t.hovered===s.key?s.borderColor:"#dee2e6",borderWidth:"2px",borderStyle:"solid",color:t.selectedStatus===s.key?"#fff":"#000",transition:"0.2s"}),onClick:C=>t.selectedStatus=s.key,onMouseover:C=>t.hovered=s.key,onMouseleave:e[0]||(e[0]=C=>t.hovered=null)},[o("div",q,[o("span",J,a(s.label),1),o("span",K,a(s.count),1)])],44,z))),128))]),o("div",Q,[o("div",W,[o("div",X,[u(N,{placeholder:"T√¨m ki·∫øm","allow-clear":"","enter-button":"",class:"w-100"})]),o("div",G,[u(k,{class:"col",value:t.status_id,"onUpdate:value":e[1]||(e[1]=s=>t.status_id=s),"show-search":"",placeholder:"Tr·∫°ng th√°i",options:t.documents_status,"filter-option":t.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),u(k,{class:"col",value:t.type_id,"onUpdate:value":e[2]||(e[2]=s=>t.type_id=s),"show-search":"",placeholder:"Lo·∫°i vƒÉn b·∫£n",options:t.documents_type,"filter-option":t.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),u(k,{class:"col",value:t.department_id,"onUpdate:value":e[3]||(e[3]=s=>t.department_id=s),"show-search":"",placeholder:"ƒê∆°n v·ªã ƒë·ªÅ xu·∫•t",options:t.documents_creator,"filter-option":t.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),u(m,{class:"col",type:"primary"},{default:d(()=>e[8]||(e[8]=[o("i",{class:"fa-solid fa-filter"},null,-1)])),_:1})])])]),o("div",Y,[o("div",Z,[u($,{dataSource:t.documents,columns:t.columns,scroll:{x:576},bordered:"",customRow:t.customRow,showSorterTooltip:!1,locale:{triggerDesc:"Nh·∫•n ƒë·ªÉ s·∫Øp x·∫øp gi·∫£m d·∫ßn",triggerAsc:"Nh·∫•n ƒë·ªÉ s·∫Øp x·∫øp tƒÉng d·∫ßn",cancelSort:"Nh·∫•n ƒë·ªÉ h·ªßy s·∫Øp x·∫øp"}},{headerCell:d(({column:s})=>[s.key==="name"?(l(),b(v,{key:0,title:"S·∫Øp x·∫øp theo t√™n vƒÉn b·∫£n"},{default:d(()=>[o("span",null,a(s.title),1)]),_:2},1024)):s.key==="type"?(l(),b(v,{key:1,title:"S·∫Øp x·∫øp theo lo·∫°i vƒÉn b·∫£n"},{default:d(()=>[o("span",null,a(s.title),1)]),_:2},1024)):s.key==="status"?(l(),b(v,{key:2,title:"S·∫Øp x·∫øp theo tr·∫°ng th√°i"},{default:d(()=>[o("span",null,a(s.title),1)]),_:2},1024)):s.key==="created_at"?(l(),b(v,{key:3,title:"S·∫Øp x·∫øp theo ng√†y t·∫°o"},{default:d(()=>[o("span",null,a(s.title),1)]),_:2},1024)):s.key==="updated_at"?(l(),b(v,{key:4,title:"S·∫Øp x·∫øp theo ng√†y c·∫≠p nh·∫≠t"},{default:d(()=>[o("span",null,a(s.title),1)]),_:2},1024)):p("",!0)]),bodyCell:d(({column:s,index:C,record:c})=>[s.key==="index"?(l(),i("span",ee,a(C+1),1)):p("",!0),s.key==="type"?(l(),i(S,{key:1},[c.type_id==1?(l(),i("span",te,a(c.type),1)):p("",!0),c.type_id==2?(l(),i("span",se,a(c.type),1)):p("",!0),c.type_id==3?(l(),i("span",oe,a(c.type),1)):p("",!0)],64)):p("",!0),s.key==="status"?(l(),i(S,{key:2},[c.status==="draft"?(l(),i("span",ne,"B·∫£n nh√°p")):p("",!0),c.status==="pending"?(l(),i("span",le,"Ch·ªù duy·ªát")):p("",!0),c.status==="approved"?(l(),i("span",ae,"ƒê√£ duy·ªát")):p("",!0),c.status==="rejected"?(l(),i("span",de,"B·ªã t·ª´ ch·ªëi")):p("",!0)],64)):p("",!0)]),_:1},8,["dataSource","columns","customRow"])])])]),_:1}),u(w,{visible:t.detailVisible,"onUpdate:visible":e[6]||(e[6]=s=>t.detailVisible=s),width:"600px"},{footer:d(()=>[u(m,{onClick:e[4]||(e[4]=s=>t.detailVisible=!1)},{default:d(()=>e[18]||(e[18]=[f("ƒê√≥ng")])),_:1}),u(m,{type:"primary",onClick:e[5]||(e[5]=s=>t.goToEditPage(t.selectedDocument.id))},{default:d(()=>e[19]||(e[19]=[f("Chi ti·∫øt")])),_:1})]),default:d(()=>[o("div",null,[e[17]||(e[17]=o("h5",null,"üìÑ Th√¥ng tin vƒÉn b·∫£n",-1)),o("p",null,[e[10]||(e[10]=o("strong",null,"Ti√™u ƒë·ªÅ:",-1)),f(" "+a(t.selectedDocument.title),1)]),o("p",null,[e[11]||(e[11]=o("strong",null,"M√¥ t·∫£:",-1)),f(" "+a(t.selectedDocument.description),1)]),o("p",null,[e[12]||(e[12]=o("strong",null,"Lo·∫°i vƒÉn b·∫£n:",-1)),f(" "+a(t.selectedDocument.type),1)]),o("p",null,[e[13]||(e[13]=o("strong",null,"S·ªë l∆∞·ª£ng phi√™n b·∫£n:",-1)),f(" "+a(t.selectedDocument.version_count),1)]),o("p",null,[e[14]||(e[14]=o("strong",null,"Ng√†y t·∫°o:",-1)),f(" "+a(t.selectedDocument.created_at),1)]),o("p",null,[e[15]||(e[15]=o("strong",null,"Ng√†y c·∫≠p nh·∫≠t:",-1)),f(" "+a(t.selectedDocument.updated_at),1)]),o("p",null,[e[16]||(e[16]=o("strong",null,"T·ªáp:",-1)),o("a",{href:`http://localhost:8000/documents/${t.selectedDocument.file_path}`,target:"_blank"}," Xem t·ªáp ",8,re)]),u(r)])]),_:1},8,["visible"])],64)}const ye=B(P,[["render",ie]]);export{ye as default};
