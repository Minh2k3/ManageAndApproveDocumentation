import{N as R,e as i,B as T,_ as V,d as N,c as O,b as s,a as l,w as g,r as d,k as j,Q as D,f as L,i as M,C as u,z as U,o as H,J as q}from"./index-Ba8l0gpi.js";import{_ as I}from"./logo_tlu-B7rE08lr.js";import{M as S,_ as z,a as B}from"./logo_hsv-DZE9g0X-.js";import{H as Q}from"./HomeOutlined-Cpx2c2rB.js";import"./pdfjs-CqkleIqs.js";const F="/assets/NMT-CU7L5eDk.jpg",G=R("register",()=>{const e=i([]),t=i([]),c=i(!1);async function v(p=!1){if(!(c.value&&!p))try{await T.get("api/register-options").then(r=>{console.log("Response:",r.data),e.value=r.data.departments,t.value=r.data.rolls,c.value=!0}).catch(r=>{console.error(r)})}catch(r){console.error("Lỗi khi lấy dữ liệu:",r)}}function m(){e.value=[],t.value=[],c.value=!1}return{departments:e,rolls:t,isFetched:c,fetchRegisterForm:v,reset:m}}),P=N({components:{MailOutlined:S,QuestionCircleOutlined:D,HomeOutlined:Q},setup(){const e=U(),t=G(),c=i(""),v=i(""),m=i(""),p=i(""),r=i(!1),h=i(null),f=i(null),w=i([]),_=i([]),y=(n,C)=>C.label.toLowerCase().includes(n.toLowerCase());let b=0;const k=()=>{const n=Date.now();n-b>=6666?(b=n,u.info("Vui lòng gửi email yêu cầu thêm phòng ban mới đến địa chỉ ThayDungDepTrai@gmail.com!")):console.log("Thông báo này đang trong thời gian cooldown")};L(async()=>{await t.fetchRegisterForm(),w.value=t.departments,_.value=t.rolls,console.log("Đã gọi hàm getUsersRegister()")});const a=i(!1),x=()=>{if(console.log("Đăng ký với thông tin:",{name:c.value,email:v.value,password:m.value,password_confirmation:p.value,department_id:h.value,roll_at_department_id:f.value}),!c.value.trim()){u.error("Vui lòng nhập họ và tên!"),a.value=!1;return}if(!v.value.trim()){u.error("Vui lòng nhập email!"),a.value=!1;return}if(h.value===null){u.error("Phòng ban không được để trống."),a.value=!1;return}if(f.value===null){u.error("Vai trò không được để trống."),a.value=!1;return}if(!m.value.trim()){u.error("Mật khẩu không được để trống."),a.value=!1;return}if(m.value!==p.value){u.error("Mật khẩu không khớp!"),a.value=!1;return}if(!r.value){u.error("Vui lòng đồng ý với các điều khoản và chính sách của hệ thống!"),a.value=!1;return}a.value=!0};M(a,n=>{n&&(console.log("Đăng ký người dùng mới"),o(),a.value=!1)});const o=async()=>{console.log("Đăng ký người dùng mới");try{const n=await T.post("api/register",{name:c.value,email:v.value,password:m.value,password_confirmation:p.value,department_id:h.value,roll_at_department_id:f.value});console.log("Đăng ký thành công:",n.data),a.value=!1,u.success("Đăng ký thành công! Vui lòng kiểm tra email để xác nhận tài khoản."),e.push({name:"login"})}catch(n){n.response&&n.response.status===422?(console.log("Lỗi validate:",n.response.data.errors),alert("Đăng ký thất bại: "+JSON.stringify(n.response.data.errors))):(console.error("Lỗi khác:",n),u.error("Đăng ký thất bại: "+JSON.stringify(n.response.data.message)))}};return{name:c,email:v,password:m,password_confirmation:p,departments:w,rolls:_,ok:r,bgImage:F,selectedDepartment:h,selectedRoll:f,filterOption:y,showRequestNewDepartmentModal:k,register:x}}}),$={class:"container-fluid vh-100 overflow-hidden backGradient"},J={class:"position-absolute top-0 end-0 mt-sm-5 me-sm-3"},K={class:"row h-100 py-3"},Y={class:"d-sm-flex col-sm-5 d-none",style:{}},E={class:"col-12"},X={class:"row mt-3"},A={class:"col-12 justify-content-center d-flex mb-1 align-items-center"},W={class:"col-12 col-sm-7 d-flex justify-content-center rounded-start-5 align-items-center",style:{"background-color":"#f8f9fa"}},Z={class:"row w-100"},ss={class:"col-12"},ts={class:"row justify-content-center"},es={class:"col-sm-4"},os={class:"col-12 col-sm-12 mt-1"},ls={class:"col-sm-4 mt-sm-0 mt-3"},ns={class:"col-12 col-sm-12 mt-1"},as={class:"row justify-content-center mt-3"},is={class:"col-sm-5"},rs={class:"col-12 col-sm-12 mt-1"},cs={class:"d-flex align-items-center"},ds={class:"col-sm-3 mt-sm-0 mt-3"},us={class:"col-12 col-sm-12 mt-1"},ms={class:"d-flex"},vs={class:"row justify-content-center mt-3"},ps={class:"col-sm-4"},fs={class:"col-12 col-sm-12 mt-1"},gs={class:"col-sm-4 mt-sm-0 mt-3"},hs={class:"col-12 col-sm-12 mt-1"},ws={class:"row justify-content-center mt-3"},_s={class:"col-sm-6 col-12 border border-secondary row py-2"},ys={class:"col-sm-1 col-1"},bs={class:"d-flex justify-content-center"},ks={class:"row justify-content-center mt-3"},xs={class:"col-12 col-sm-6 justify-content-center"},js={class:"d-grid gap-2"},Ts={class:"row mt-4"},Cs={class:"col-12 justify-content-center d-flex"};function Rs(e,t,c,v,m,p){const r=d("HomeOutlined"),h=d("a-button"),f=d("router-link"),w=d("a-avatar"),_=d("a-input"),y=d("a-select"),b=d("QuestionCircleOutlined"),k=d("a-tooltip"),a=d("a-input-password"),x=d("a-checkbox");return H(),O("div",$,[s("div",J,[l(f,{to:"/",class:"text-decoration-none"},{default:g(()=>[l(h,{type:"primary",class:"d-flex align-items-center"},{default:g(()=>[l(r,{class:"me-1"}),t[8]||(t[8]=q(" Trang chủ "))]),_:1})]),_:1})]),s("div",K,[s("div",Y,[s("div",E,[s("div",X,[s("div",A,[l(w,{shape:"square",size:50,style:{"background-color":"transparent"}},{icon:g(()=>t[9]||(t[9]=[s("img",{src:I,alt:"logo_tlu",style:{width:"100%",height:"100%","object-fit":"contain"}},null,-1)])),_:1}),l(w,{shape:"square",size:50,style:{"background-color":"transparent"},class:"mx-3"},{icon:g(()=>t[10]||(t[10]=[s("img",{src:z,alt:"logo_dtn",style:{width:"100%",height:"100%","object-fit":"contain"}},null,-1)])),_:1}),l(w,{shape:"square",size:45,style:{"background-color":"transparent"}},{icon:g(()=>t[11]||(t[11]=[s("img",{src:B,alt:"logo_hsv",style:{width:"100%",height:"100%","object-fit":"contain"}},null,-1)])),_:1})])]),t[12]||(t[12]=j('<div class="row"><div class="col-12 justify-content-center"><h3 class="text-center mb-0 p-1">TRƯỜNG ĐẠI HỌC THỦY LỢI</h3></div></div><div class="row"><div class="col-12 justify-content-center d-flex mb-3"><h4 class="text-center col-12">Đoàn Thanh niên - Hội Sinh viên</h4></div></div><div class="row h-100"><div class="d-flex align-items-center"><h1 class="fs-1" style="color:#005baa;">Hệ Thống Quản Lý và Phê Duyệt Văn Bản Điện Tử</h1></div></div>',3))])]),s("div",W,[s("div",Z,[s("div",ss,[t[31]||(t[31]=j('<div class="row"><div class="justify-content-center"><h1 class="text-center fw-bold mb-0">ĐĂNG KÝ</h1></div></div><div class="row mb-3"><div class="col-12 justify-content-center"><h4 class="text-center text-secondary fst-italic">Tạo tài khoản mới để sử dụng hệ thống </h4></div></div>',2)),s("div",ts,[s("div",es,[t[14]||(t[14]=s("div",{class:"col-12 col-sm-12 text-start align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",{class:"fw-bold"},"Họ và tên")])],-1)),t[15]||(t[15]=s("div",{class:"w-100"},null,-1)),s("div",os,[l(_,{value:e.name,"onUpdate:value":t[0]||(t[0]=o=>e.name=o),placeholder:"Trần Tuấn Minh","allow-clear":""},null,8,["value"]),t[13]||(t[13]=s("div",{class:"w-100"},null,-1))])]),s("div",ls,[t[17]||(t[17]=s("div",{class:"col-12 col-sm-12 text-start align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",{class:"fw-bold"},"Email")])],-1)),t[18]||(t[18]=s("div",{class:"w-100"},null,-1)),s("div",ns,[l(_,{value:e.email,"onUpdate:value":t[1]||(t[1]=o=>e.email=o),placeholder:"2151062831@e.tlu.edu.vn","allow-clear":""},null,8,["value"]),t[16]||(t[16]=s("div",{class:"w-100"},null,-1))])])]),s("div",as,[s("div",is,[t[20]||(t[20]=s("div",{class:"col-12 col-sm-12 text-start align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",{class:"fw-bold"},"Phòng/Khoa/Đơn vị")])],-1)),s("div",rs,[s("div",cs,[l(y,{value:e.selectedDepartment,"onUpdate:value":t[2]||(t[2]=o=>e.selectedDepartment=o),"show-search":"",placeholder:"Phòng/Khoa/Đơn vị",style:{width:"100%"},options:e.departments,"filter-option":e.filterOption,"allow-clear":"","list-height":160},null,8,["value","options","filter-option"]),l(k,{placement:"right",title:"Đơn vị của bạn không có trong danh sách? Gửi mail cho admin bằng tài khoản outlock của trường"},{default:g(()=>[l(b,{class:"ms-2 text-primary",style:{"font-size":"18px",cursor:"pointer"},onClick:e.showRequestNewDepartmentModal},null,8,["onClick"])]),_:1})]),t[19]||(t[19]=s("div",{class:"w-100"},null,-1))])]),s("div",ds,[t[22]||(t[22]=s("div",{class:"col-12 col-sm-12 text-start align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",{class:"fw-bold"},"Vai trò")])],-1)),s("div",us,[s("div",ms,[l(y,{value:e.selectedRoll,"onUpdate:value":t[3]||(t[3]=o=>e.selectedRoll=o),"show-search":"",placeholder:"Vai trò",style:{width:"100%"},options:e.rolls,"filter-option":e.filterOption,"allow-clear":"","list-height":160},null,8,["value","options","filter-option"])]),t[21]||(t[21]=s("div",{class:"w-100"},null,-1))])])]),s("div",vs,[s("div",ps,[t[24]||(t[24]=s("div",{class:"col-12 col-sm-7 text-start align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",{class:"fw-bold"},"Mật khẩu")])],-1)),s("div",fs,[l(a,{value:e.password,"onUpdate:value":t[4]||(t[4]=o=>e.password=o),placeholder:"abcILoveYou123","allow-clear":""},null,8,["value"]),t[23]||(t[23]=s("div",{class:"w-100"},null,-1))])]),s("div",gs,[t[26]||(t[26]=s("div",{class:"col-12 col-sm-12 text-start align-self-center"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",{class:"fw-bold"},"Xác nhận mật khẩu")])],-1)),s("div",hs,[l(a,{value:e.password_confirmation,"onUpdate:value":t[5]||(t[5]=o=>e.password_confirmation=o),placeholder:"abcILoveYou123","allow-clear":""},null,8,["value"]),t[25]||(t[25]=s("div",{class:"w-100"},null,-1))])])]),s("div",ws,[s("div",_s,[s("div",ys,[s("div",bs,[l(x,{checked:e.ok,"onUpdate:checked":t[6]||(t[6]=o=>e.ok=o),class:""},null,8,["checked"])]),t[27]||(t[27]=s("div",{class:"w-100"},null,-1))]),t[28]||(t[28]=j('<div class="col-sm-11 col-11 px-0 ps-2"><div class="d-flex"><span class="fw-bold fst-italic">Tôi đồng ý với các điều khoản và chính sách của hệ thống</span></div><div class="w-100"></div><div class="d-flex pt-2 align-items-center"><span class="text-secondary">Chi tiết điều khoản xem tại</span>   <a href="#" class="text-decoration-none text-primary fst-italic">đây</a></div></div>',1))])]),s("div",ks,[s("div",xs,[s("div",js,[s("button",{class:"btn btn-primary rounded-3 py-2 my-button",type:"button",style:{"background-color":"#0d6efd","border-color":"#0d6efd",color:"#ffffff"},onClick:t[7]||(t[7]=(...o)=>e.register&&e.register(...o))}," Đăng ký ")])])]),s("div",Ts,[s("div",Cs,[t[30]||(t[30]=s("span",{class:"text-center text-secondary mx-2"},"Đã có tài khoản?",-1)),l(f,{to:{name:"login"},class:"text-decoration-none"},{default:g(()=>t[29]||(t[29]=[s("span",{class:"text-center text-primary fst-italic"},"Đăng nhập",-1)])),_:1})])])])])])])])}const Ms=V(P,[["render",Rs]]);export{Ms as default};
