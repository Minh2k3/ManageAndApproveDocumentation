import{u as V}from"./use-menu-DW2wxuke.js";import{_ as I,e as P,c as p,b as r,d as l,r as c,F as D,z as j,g as A,a2 as L,k as M,i as R,D as E,o as a,a as t,N as f,u as O,E as U,q as d,x as y,I as m}from"./index-DelqX8ny.js";const z=P({setup(){V().onSelectedKeys(["approver-documents"]);const e=j().user,T=A(!1),_=A({}),N=n=>{_.value=n,T.value=!0,console.log(_.value.id)},b=L();let h=A([]),g=A([]);M(_,async n=>{n?(await b.fetchDocumentFlowSteps(n.id),g.value=b.document_flow_steps.filter(i=>i.document_id===n.id)):g.value=[]}),R(async()=>{await b.fetchDocuments(e.id),h.value=b.documents});const $=[{title:"T√™n vƒÉn b·∫£n",key:"title",dataIndex:"title",width:200,sorter:(n,i)=>n.title.localeCompare(i.title),sortDirections:["ascend","descend"],customHeaderCell:()=>({style:{textAlign:"center"}})},{title:"Lo·∫°i vƒÉn b·∫£n",key:"type",dataIndex:"type",width:150,sorter:(n,i)=>n.type.localeCompare(i.type),sortDirections:["ascend","descend"],customHeaderCell:()=>({style:{textAlign:"center"}})},{title:"Tr·∫°ng th√°i",key:"status",dataIndex:"status",width:120,sorter:(n,i)=>{const S={draft:1,pending:2,approved:3,rejected:4};return S[n.status]-S[i.status]},sortDirections:["ascend","descend"],align:"center"},{title:"S·ªë phi√™n b·∫£n",key:"version_count",dataIndex:"version_count",width:120,sorter:(n,i)=>n.version_count-i.version_count,sortDirections:["ascend","descend"],align:"center"},{title:"Ng√†y t·∫°o",key:"created_at",dataIndex:"created_at",width:150,responsive:["xl"],sorter:(n,i)=>n.created_at.localeCompare(i.created_at),sortDirections:["ascend","descend"],align:"center"},{title:"Ng√†y c·∫≠p nh·∫≠t",key:"updated_at",dataIndex:"updated_at",width:150,sorter:(n,i)=>n.updated_at.localeCompare(i.updated_at),sortDirections:["ascend","descend"],align:"center"}],k=E();return{documents:h,columns:$,document_flow_steps:g,detailVisible:T,selectedDocument:_,customRow:n=>({onClick:()=>{N(n)},style:{cursor:"pointer"}}),viewDetail:N,goToEditPage:n=>{k.push(`documents/${n}/edit`)},goToDetailPage:n=>{k.push({name:"creator-documents-detail",params:{id:n}})},showProcess:n=>n.process+"/"+n.step_count+" b∆∞·ªõc"}}}),F={class:"row my-3"},Q={class:"d-flex justify-content-end align-items-center"},H={class:"row mb-3"},q=["onClick","onMouseover"],J={class:"d-flex justify-content-between align-items-center"},K={class:"fw-bold fs-6"},W={class:"fw-bold fs-3"},X={class:"row mb-3"},G={class:"d-flex flex-wrap gap-2 w-100 align-items-center"},Y={class:"flex-grow-1",style:{"min-width":"250px"}},Z={class:"d-flex gap-2 flex-wrap justify-content-end ms-auto"},ee={class:"row"},te={class:"col-12"},se={key:0},oe={class:""},ne={class:""},le={key:0,class:"bg-primary text-white p-1 rounded rounded-1 border border-1"},ae={key:1,class:"bg-warning text-white p-1 rounded rounded-1 border border-1"},de={key:2,class:"bg-success text-white p-1 rounded rounded-1 border border-1"},ie={key:0},re={key:1},ue={class:""},pe=["href"];function ce(s,e,T,_,N,b){const h=c("router-link"),g=c("a-button"),$=c("a-input-search"),k=c("a-select"),x=c("a-empty"),v=c("a-tooltip"),w=c("a-tag"),B=c("a-table"),n=c("a-card"),i=c("a-divider"),S=c("a-modal");return a(),p(D,null,[r(n,{title:"",style:{width:"100%"}},{default:l(()=>[e[15]||(e[15]=t("h2",{class:"fw-bold mb-3"},"Qu·∫£n L√Ω VƒÉn B·∫£n",-1)),t("div",F,[t("div",Q,[r(g,{type:"primary",class:"col-6 col-sm-4"},{default:l(()=>[r(h,{class:"text-decoration-none",to:"documents/create"},{default:l(()=>e[7]||(e[7]=[t("i",{class:"fa-solid fa-add me-2"},null,-1),f("T·∫°o vƒÉn b·∫£n m·ªõi ")])),_:1})]),_:1})])]),t("div",H,[(a(!0),p(D,null,O(s.statusList,o=>(a(),p("div",{key:o.key,class:"col-5 col-md mb-2 mb-md-0 border rounded-2 mx-2 p-3 cursor-pointer",style:U({backgroundColor:s.selectedStatus===o.key?o.color:s.hovered===o.key?"#f0f0f0":"#ffffff",borderColor:s.selectedStatus===o.key||s.hovered===o.key?o.borderColor:"#dee2e6",borderWidth:"2px",borderStyle:"solid",color:s.selectedStatus===o.key?"#fff":"#000",transition:"0.2s"}),onClick:C=>s.selectedStatus=o.key,onMouseover:C=>s.hovered=o.key,onMouseleave:e[0]||(e[0]=C=>s.hovered=null)},[t("div",J,[t("span",K,d(o.label),1),t("span",W,d(o.count),1)])],44,q))),128))]),t("div",X,[t("div",G,[t("div",Y,[r($,{placeholder:"T√¨m ki·∫øm","allow-clear":"","enter-button":"",class:"w-100"})]),t("div",Z,[r(k,{class:"col",value:s.status_id,"onUpdate:value":e[1]||(e[1]=o=>s.status_id=o),"show-search":"",placeholder:"Tr·∫°ng th√°i",options:s.documents_status,"filter-option":s.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),r(k,{class:"col",value:s.type_id,"onUpdate:value":e[2]||(e[2]=o=>s.type_id=o),"show-search":"",placeholder:"Lo·∫°i vƒÉn b·∫£n",options:s.documents_type,"filter-option":s.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),r(k,{class:"col",value:s.department_id,"onUpdate:value":e[3]||(e[3]=o=>s.department_id=o),"show-search":"",placeholder:"ƒê∆°n v·ªã ƒë·ªÅ xu·∫•t",options:s.documents_creator,"filter-option":s.filterOption,"allow-clear":"",style:{"min-width":"150px"}},null,8,["value","options","filter-option"]),r(g,{class:"col",type:"primary"},{default:l(()=>e[8]||(e[8]=[t("i",{class:"fa-solid fa-filter"},null,-1)])),_:1})])])]),t("div",ee,[t("div",te,[s.documents.length===0?(a(),y(x,{key:0,image:"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original","image-style":{height:"60px"}},{description:l(()=>e[9]||(e[9]=[t("span",null," M·∫°nh d·∫°n t·∫°o vƒÉn b·∫£n m·ªõi m√† g·ª≠i ƒëi ch·ª©, r√©n l√†m g√¨. ",-1)])),default:l(()=>[r(g,{type:"primary"},{default:l(()=>e[10]||(e[10]=[f("B·∫•m n·∫øu b·∫°n c·∫ßn")])),_:1})]),_:1})):(a(),y(B,{key:1,dataSource:s.documents,columns:s.columns,scroll:{x:576},bordered:"",customRow:s.customRow,showSorterTooltip:!1,locale:{triggerDesc:"Nh·∫•n ƒë·ªÉ s·∫Øp x·∫øp gi·∫£m d·∫ßn",triggerAsc:"Nh·∫•n ƒë·ªÉ s·∫Øp x·∫øp tƒÉng d·∫ßn",cancelSort:"Nh·∫•n ƒë·ªÉ h·ªßy s·∫Øp x·∫øp"}},{headerCell:l(({column:o})=>[o.key==="name"?(a(),y(v,{key:0,title:"S·∫Øp x·∫øp theo t√™n vƒÉn b·∫£n"},{default:l(()=>[t("span",null,d(o.title),1)]),_:2},1024)):o.key==="type"?(a(),y(v,{key:1,title:"S·∫Øp x·∫øp theo lo·∫°i vƒÉn b·∫£n"},{default:l(()=>[t("span",null,d(o.title),1)]),_:2},1024)):o.key==="status"?(a(),y(v,{key:2,title:"S·∫Øp x·∫øp theo tr·∫°ng th√°i"},{default:l(()=>[t("span",null,d(o.title),1)]),_:2},1024)):o.key==="created_at"?(a(),y(v,{key:3,title:"S·∫Øp x·∫øp theo ng√†y t·∫°o"},{default:l(()=>[t("span",null,d(o.title),1)]),_:2},1024)):o.key==="updated_at"?(a(),y(v,{key:4,title:"S·∫Øp x·∫øp theo ng√†y c·∫≠p nh·∫≠t"},{default:l(()=>[t("span",null,d(o.title),1)]),_:2},1024)):m("",!0)]),bodyCell:l(({column:o,index:C,record:u})=>[o.key==="index"?(a(),p("span",se,d(C+1),1)):m("",!0),o.key==="title"?(a(),y(v,{key:1},{title:l(()=>[t("span",oe,d(u.description),1)]),default:l(()=>[t("span",ne,d(u.title),1)]),_:2},1024)):m("",!0),o.key==="type"?(a(),p(D,{key:2},[u.type_id==1?(a(),p("span",le,d(u.type),1)):m("",!0),u.type_id==2?(a(),p("span",ae,d(u.type),1)):m("",!0),u.type_id==3?(a(),p("span",de,d(u.type),1)):m("",!0)],64)):m("",!0),o.key==="status"?(a(),p(D,{key:3},[u.status==="draft"?(a(),p("div",ie,[r(w,{color:"blue"},{default:l(()=>e[11]||(e[11]=[t("span",null,"B·∫£n nh√°p",-1)])),_:1})])):(a(),p("div",re,[r(v,null,{title:l(()=>[t("span",ue,d(s.showProcess(u)),1)]),default:l(()=>[u.status==="approved"?(a(),y(w,{key:0,color:"green"},{default:l(()=>e[12]||(e[12]=[t("span",null,"ƒê√£ duy·ªát",-1)])),_:1})):m("",!0),u.status==="in_review"?(a(),y(w,{key:1,color:"orange"},{default:l(()=>e[13]||(e[13]=[t("span",null,"Ch·ªù duy·ªát",-1)])),_:1})):m("",!0),u.status==="rejected"?(a(),y(w,{key:2,color:"red"},{default:l(()=>e[14]||(e[14]=[t("span",null,"B·ªã t·ª´ ch·ªëi",-1)])),_:1})):m("",!0)]),_:2},1024)]))],64)):m("",!0)]),_:1},8,["dataSource","columns","customRow"]))])])]),_:1}),r(S,{open:s.detailVisible,"onUpdate:open":e[6]||(e[6]=o=>s.detailVisible=o),width:"600px",zIndex:1e4},{footer:l(()=>[r(g,{onClick:e[4]||(e[4]=o=>s.detailVisible=!1)},{default:l(()=>e[25]||(e[25]=[f("ƒê√≥ng")])),_:1}),r(g,{type:"primary",onClick:e[5]||(e[5]=o=>s.goToDetailPage(s.selectedDocument.id))},{default:l(()=>e[26]||(e[26]=[f("Chi ti·∫øt")])),_:1})]),default:l(()=>[t("div",null,[e[24]||(e[24]=t("h5",null,"üìÑ Th√¥ng tin vƒÉn b·∫£n",-1)),t("p",null,[e[16]||(e[16]=t("strong",null,"Ti√™u ƒë·ªÅ:",-1)),f(" "+d(s.selectedDocument.title),1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"M√¥ t·∫£:",-1)),f(" "+d(s.selectedDocument.description),1)]),t("p",null,[e[18]||(e[18]=t("strong",null,"Lo·∫°i vƒÉn b·∫£n:",-1)),f(" "+d(s.selectedDocument.type),1)]),t("p",null,[e[19]||(e[19]=t("strong",null,"S·ªë l∆∞·ª£ng phi√™n b·∫£n:",-1)),f(" "+d(s.selectedDocument.version_count),1)]),t("p",null,[e[20]||(e[20]=t("strong",null,"Ng√†y t·∫°o:",-1)),f(" "+d(s.selectedDocument.created_at),1)]),t("p",null,[e[21]||(e[21]=t("strong",null,"Ng√†y c·∫≠p nh·∫≠t:",-1)),f(" "+d(s.selectedDocument.updated_at),1)]),t("p",null,[e[23]||(e[23]=t("strong",null,"T·ªáp:",-1)),t("a",{href:`http://localhost:8000/documents/${s.selectedDocument.file_path}`,target:"_blank",class:"text-decoration-none"},e[22]||(e[22]=[t("span",{class:"ms-1 fst-italic"},"Xem t·ªáp",-1)]),8,pe)]),r(i)])]),_:1},8,["open"])],64)}const fe=I(z,[["render",ce]]);export{fe as default};
